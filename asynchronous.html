<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Document</title>
		<style type="text/css">
			img {
				width: 50px;
			}
		</style>
	</head>

	<body>
		<div id="console-root"></div>
		<script src="https://tap.ibhubs.in/utils/console.js"></script>

		<!--<script type="text/javascript">
			console.log("first");
			setTimeout(() => {
				console.log("time");
			}, );
			console.log("second");
			console.log("third");
		</script>-->
		<!--<script type="text/javascript">
			console.log("first");
			let ud = get();
			console.log(ud);
			console.log("last");
			
			function get() {
				setTimeout(() => {
					console.log("function");
				}, 5000);
			}
		</script>-->
		<!--<script type="text/javascript">
			console.log("first");
			let user;
			get(1, function(user) {
				console.log(user);
			});
			console.log("last");

			function get(id, callback) {
				setTimeout(() => {
					console.log("function");
					callback({ id: id, username: "jack" });
				}, 2000);
			}
		</script>-->
		<div id="image">

		</div>
		<script type="text/javascript">
			window.fetch('https://jsonplaceholder.typicode.com/posts').then(response => {
					return response.json();
				})
				.then(json => {
					console.log(json);
				});

			function loadImagePromise(url) {
				return new Promise((resolve, reject) => {
					let imgEl = document.createElement("img");
					imgEl.onload = () => {
						console.log("image is loaded");
						resolve(imgEl);
					};
					//reject("Image Error");
					//random();
					//reject(new Error("Image Error"));
					setTimeout(() => {
						imgEl.src = url;
					}, 2000);
				});
			}
			async function getAllImages() {
				console.log("hii");
				let first = await loadImagePromise("assignment-13/assets/android.png");
				document.body.appendChild(first);
				let second = await loadImagePromise("assignment-13/assets/angular.png");
				document.body.appendChild(second);
				let third = await loadImagePromise("assignment-13/assets/amphp.png");
				document.body.appendChild(third);
			}
			getAllImages();
			console.log("hello");
			/*loadImagePromise("assignment-13/assets/android.png").then(response => {
				document.body.appendChild(response);
				return loadImagePromise("assignment-13/assets/angular.png");
			}).then(response => {
				document.body.appendChild(response);
				console.log(response);
				return loadImagePromise("assignment-13/assets/amphp.png");
			}).catch((e) => {
				//throw "Error image";
				console.log(e.message);
			}).then(response => {
				console.log("hii");
			});


			/*let first = loadImagePromise("assignment-13/assets/android.png");
			let second = first.then(response => {
				console.log(response);
				return;
			});
			let third = first.then(response => {
				console.log(response)
			});
			/*
						first.then(response => {
							console.log(response);
							//document.body.appendChild(response);
							let second = loadImagePromise("assignment-13/assets/amphp.png");

							second.then(response => {
								console.log(response);
								//document.body.appendChild(response);
								let third = loadImagePromise("assignment-13/assets/angular.png")

								third.then(response => {
									console.log(response);
									//	document.body.appendChild(response);
								})*/


			//document.body.appendChild(response);
			//return 
			//console.log(response, "hii")
			//return "random";
			//return loadImagePromise("assignment-13/assets/amphp.png");
		</script>
		<!--<script type="text/javascript">
			let image = document.createElement("img");

			image.onload = () => {
				document.getElementById("image").appendChild(image);
				console.log("First image is loaded");
			};

			setTimeout(() => {
				image.setAttribute("src", "assignment-13/assets/android.png");
			}, 2000);
		</script>-->
		<!--<script type="text/javascript">
			/*let image = document.createElement("img");
						setTimeout(() => {
							image.setAttribute("src", "assignment-13/assets/android.png");
						}, 2000);
						document.getElementById("image").appendChild(image)
						image.onload = () => {
							console.log("image1 is loaded");
						}*/
			let image2 = document.createElement("img");
			image2.setAttribute("src", "assignment-13/assets/amphp.png");
			document.getElementById("image").appendChild(image2)
			image2.onload = () => {
				console.log("image2 is loaded");
			}
			let image3 = document.createElement("img");
			image3.setAttribute("src", "assignment-13/assets/angular.png");
			document.getElementById("image").appendChild(image3);
			image3.onload = () => {
				console.log("image3 is loaded");
			}

			//for(let i=0;i<3;i++){
			functionCall(function() {
				console.log("image1 loaded");
			});
			functionCall2(function() {
			    console.log("image2 is loaded");
			})
			function functionCall(callback) {
				setTimeout(() => {
					let image = document.createElement("img");
					image.setAttribute("src", "assignment-13/assets/android.png");
					document.getElementById("image").appendChild(image)
					callback();
				}, 2000);
			}
			function functionCall2(callback) {
				setTimeout(() => {
					let image = document.createElement("img");
					image.setAttribute("src", "assignment-13/assets/android.png");
					document.getElementById("image").appendChild(image)
					callback();
				}, 2000);
			}
			
			//}
		</script>-->

	</body>

</html>
